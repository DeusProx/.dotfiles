# vim: set ts=4 sw=4 sts=4 et:

[user]
    name = Gordon Lawrenz
    email = gordon@lawrenz.email

# No "You are in 'detached HEAD' state. You can look around ..." anymore
[advice]
    detachedHead = false

[credential]
    helper = cache --timeout=86400

[help]
    autocorrect = prompt

[init]
    defaultBranch = main

[core]
    editor = nvim
    preloadIndex = true
    fscache = true
    fsmonitor = true
    untrackedCache = true
    ignoreCase = false

[column]
    ui = auto

[color]
    ui = auto

[diff]
    algorithm = histogram # https://luppeng.wordpress.com/2020/10/10/when-to-use-each-of-the-git-diff-algorithms/
    colorMoved = true
    renames = true

[branch]
    sort = -committerdate

[tag]
    sort = version:refname

[fetch]
    all = true
    prune = true
    pruneTags = true
    recurseSubmodules = on-demand

[pull]
    ff = only

[merge]
    conflictstyle = zdiff3

[push]
    default = simple
    followTags = true
    autoSetupRemote = true

[rebase]
    autoSquash = true
    autoStash = true
    updateRefs = true

# [re]use [re]covered [re]solution
[rerere]
    enabled = true
    autoupdate = true
    diffAlgorithm = histogram

# avoid data corruption
[transfer]
    fsckobjects = true
[fetch]
    fsckobjects = true
[receive]
    fsckobjects = true

# INFO: automatically added by `git lfs install`
[filter "lfs"]
    clean = git-lfs clean -- %f
    smudge = git-lfs smudge -- %f
    process = git-lfs filter-process
    required = true
[alias]
    # status and logging
    s = status -s
    st = status
    l = log --graph --date=relative --color=always --all --topo-order --pretty='format:%Cgreen%h%Creset %s%C(auto)%d%Creset %C(blue)%an%Creset %C(yellow)%ad%Creset'

    # removes files from repo but not from disk
    untrack = rm -r --cached --
    unstage = reset HEAD --
    uncommit = reset --soft HEAD~1

    # add to last commit
    amend = commit --amend --no-edit
    oops = commit --amend --no-edit

    # creates an empty branch to review a repo/branch against
    empty = ! git checkout --orphan empty && git rm -r --cached --quiet --ignore-unmatch . && git commit --allow-empty -m 'empty commit'

    # opens the browser and goes to your github project
    open = ! open $(git config remote.origin.url | cut -d ' ' -f 1 | head -1 | sed 's/:/\\//' | sed 's/.git$//' | sed s'/^/https:\\/\\//') > /dev/null &
    browse = open

