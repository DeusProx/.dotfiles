Host *
  # security
  ForwardAgent no
  ForwardX11 no
  ForwardX11Trusted no
  PermitLocalCommand no

  # convenience
  AddKeysToAgent yes
  StrictHostKeyChecking accept-new

  TCPKeepAlive no # spoofable; use encrypted ServerAlive instead
  ServerAliveInterval 30
  ServerAliveCountMax 10

  # performance
  Compression yes

Include ~/.ssh/*.conf

Host github.com
  User git
  Hostname github.com
  PreferredAuthentications publickey
  IdentityFile ~/.ssh/id_ed25519_git

# Further performance stuff
#
# We write this at the end since not all connection can use this well and
# ssh config is first write wins
#
# Use following config on struggling connections:
#
#   ControlMaster no
#   ControlPath none
#   ControlPersist no
#
Host *
  ControlMaster auto
  ControlPath ~/.ssh/control-%r@%h:%p
  ControlPersist 1h

